# Configuration for vikunja setup
cosmos-installer: null

# Service definitions for the vikunja application
services:
  vikunja:
    image: vikunja/vikunja:0.24.6
    container_name: vikunja
    ports:
      - "3456:3456"
    volumes:
      - vikunja_files:/app/vikunja/files
    environment:
      VIKUNJA_SERVICE_PUBLICURL: http://<your public frontend url with slash>/
      VIKUNJA_DATABASE_HOST: vikunja-db
      VIKUNJA_DATABASE_PASSWORD: secret
      VIKUNJA_DATABASE_TYPE: mysql
      VIKUNJA_DATABASE_USER: vikunja
      VIKUNJA_DATABASE_DATABASE: vikunja
      VIKUNJA_SERVICE_JWTSECRET: change-me-to-a-random-secret-string
      VIKUNJA_SERVICE_ENABLEREGISTRATION: "true"
    restart: unless-stopped
    depends_on:
      - vikunja-db
    networks:
      - vikunja-network

  vikunja-db:
    image: mariadb:10.11
    container_name: vikunja-db
    command:
      - --character-set-server=utf8mb4
      - --collation-server=utf8mb4_unicode_ci
    environment:
      MYSQL_ROOT_PASSWORD: supersecret
      MYSQL_USER: vikunja
      MYSQL_PASSWORD: secret
      MYSQL_DATABASE: vikunja
    volumes:
      - vikunja_mysql:/var/lib/mysql
    restart: unless-stopped
    networks:
      - vikunja-network

networks:
  vikunja-network:
    driver: bridge

volumes:
  vikunja_files:
    name: vikunja_files
    driver: local
  vikunja_mysql:
    name: vikunja_mysql
    driver: local

x-casaos:
  architectures:
    - amd64
    - arm64
  main: vikunja
  author: DF_public
  category: utilities
  description:
    en_us: |
      Vikunja is an open-source, self-hosted task management application.

      This installation includes:
      - Vikunja task manager with web UI
      - MariaDB database for data persistence

      Perfect for:
      - Personal task management
      - Team collaboration
      - Project organization
      - Integration with external systems via API

      After installation, access the web interface and create your first account.
      For security, disable registration after creating your account.
  developer: Vikunja Team
  icon: https://vikunja.io/images/vikunja-logo.svg
  index: /
  port_map: "3456"
  scheme: http
  tagline:
    en_us: Self-hosted task management made simple
  thumbnail: https://vikunja.io/images/vikunja-logo.svg
  tips:
    before_install:
      en_us: |
        **Important Security Notes:**

        1. After installation, change the following default passwords:
           - `VIKUNJA_SERVICE_JWTSECRET` - Generate with: `openssl rand -base64 32`
           - `MYSQL_ROOT_PASSWORD` - Choose a strong password
           - `MYSQL_PASSWORD` / `VIKUNJA_DATABASE_PASSWORD` - Must match each other

        2. Set `VIKUNJA_SERVICE_PUBLICURL` to your actual access URL

        3. After creating your account, set `VIKUNJA_SERVICE_ENABLEREGISTRATION` to `false`
  title:
    en_us: Vikunja

minVersion: 0.14.0
