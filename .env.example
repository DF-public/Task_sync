# =============================================================================
# Unified Task Sync - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values.
# NEVER commit .env to version control!
#
# Generate secure values:
#   JWT Secret:   openssl rand -base64 32
#   Passwords:    openssl rand -base64 24
#   Auth Tokens:  openssl rand -hex 32
# =============================================================================

# -----------------------------------------------------------------------------
# Vikunja Configuration
# -----------------------------------------------------------------------------
# Public URL where Vikunja will be accessible
# For local development: http://localhost:3456
# For production: https://tasks.yourdomain.com
VIKUNJA_SERVICE_PUBLICURL=http://localhost:3456

# JWT Secret for authentication tokens (REQUIRED)
# Generate with: openssl rand -base64 32
VIKUNJA_SERVICE_JWTSECRET=<generate-random-secret-min-32-chars>

# Allow new user registration (set to false after initial setup for security)
VIKUNJA_SERVICE_ENABLEREGISTRATION=true

# Vikunja API Token (for MCP server and sync scripts)
# Generate in Vikunja: Settings > API Tokens > Create Token
VIKUNJA_API_TOKEN=<your-vikunja-api-token>

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# MariaDB root password (REQUIRED)
# Generate with: openssl rand -base64 24
MYSQL_ROOT_PASSWORD=<set-strong-root-password>

# Vikunja database user
MYSQL_USER=vikunja

# Vikunja database password (REQUIRED)
# Generate with: openssl rand -base64 24
MYSQL_PASSWORD=<set-strong-password>

# Database name
MYSQL_DATABASE=vikunja

# -----------------------------------------------------------------------------
# General Configuration
# -----------------------------------------------------------------------------
# Timezone (use your local timezone)
TZ=UTC

# Log level for services (debug, info, warn, error)
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# MCP Server Configuration
# -----------------------------------------------------------------------------
# Port for MCP HTTP/SSE server (used by Claude Custom Connectors)
# The server uses @democratize-technology/vikunja-mcp wrapped with mcp-proxy
MCP_PORT=3100

# -----------------------------------------------------------------------------
# Cloudflare Tunnel Configuration (for Claude Custom Connectors)
# -----------------------------------------------------------------------------
# Tunnel token from Cloudflare Zero Trust dashboard
# Get from: Zero Trust > Access > Tunnels > [Your Tunnel] > Install connector
CLOUDFLARE_TUNNEL_TOKEN=<your-cloudflare-tunnel-token>

# Tunnel name (for reference)
CLOUDFLARE_TUNNEL_NAME=unified-task-sync

# Domain for MCP endpoint (configure in Cloudflare dashboard)
# Example: vikunja-mcp.yourdomain.com
# Claude Custom Connector URL: https://vikunja-mcp.yourdomain.com/sse
MCP_DOMAIN=<your-mcp-domain>

# -----------------------------------------------------------------------------
# Claude Code Configuration
# -----------------------------------------------------------------------------
# Anthropic API key for Claude Code
# Get from: https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=<your-anthropic-api-key>

# -----------------------------------------------------------------------------
# Sync Configuration
# -----------------------------------------------------------------------------
# YouTrack Integration
YOUTRACK_URL=<https://youtrack.example.com>
YOUTRACK_TOKEN=<your-youtrack-permanent-token>

# Jira/Atlassian Integration
JIRA_URL=<https://company.atlassian.net>
JIRA_EMAIL=<your-email>
JIRA_TOKEN=<your-api-token>

# -----------------------------------------------------------------------------
# Sync Behavior
# -----------------------------------------------------------------------------
# Sync mode: "titles_only" (privacy-first) or "full"
SYNC_MODE=titles_only

# Maximum tasks to sync per source
SYNC_MAX_TASKS=100

# Sync schedule (cron expression) - used by sync-scheduler container
# Default: Every 4 hours
SYNC_SCHEDULE=0 */4 * * *
